<div class="container">
  <h1>Real-Time Crypto Data</h1>

  <!-- Status Indicator -->
  <div class="status-indicator" [ngClass]="streamStatus">
    Stream Status: {{ streamStatus | uppercase }} {{refreshed ? ' (Refreshed)' : ''}}
  </div>

  <!-- Control Buttons -->
  <div class="button-group">
    <p-button icon="pi pi-pause" label="Cancel" (click)="cancelStream()"></p-button>
    <p-button icon="pi pi-stop" label="Stop" (click)="stopStream()"></p-button>
    <p-button icon="pi pi-refresh" label="Refresh" (click)="refreshStream()"></p-button>
  </div>

  <!-- Data Table -->
  <p-table [value]="cryptoData" [paginator]="true" [rows]="10">
    <ng-template pTemplate="header">
      <tr>
        <th>Name</th>
        <th>Symbol</th>
        <th>Price (USD)</th>
        <th>Market Cap (USD)</th>
        <th>24Hr Change (%)</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-element>
      <tr>
        <td>{{ element.name }}</td>
        <td>{{ element.symbol }}</td>
        <td>{{ element.priceUsd | number:'1.2-2' }}</td>
        <td>{{ element.marketCapUsd | number }}</td>
        <td>{{ element.changePercent24Hr | number:'1.2-2' }}</td>
      </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="5">No record found.</td>
      </tr>
    </ng-template>
  </p-table>
</div>

<!-- Toast Message -->
<p-toast/>
